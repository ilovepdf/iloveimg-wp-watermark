!function(){var i,e="",a=(void 0!==window.adminpage&&(e=window.adminpage),new Array);var r;switch(e){case"upload-php":case"media_page_iloveimg-media-page":case"media_page_iloveimg-media-watermark-page":case"post-php":jQuery(document).on("click","button.iloveimg-watermark",function(e){var t=jQuery(e.target),i=t.closest("td");t.attr("disabled","disabled"),t.next().show(),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"ilove_img_wm_library",id:t.data("id")||t.attr("data-id"),imgnonce:t.data("imgnonce")||t.attr("data-imgnonce")},success:function(e){t.removeAttr("disabled"),i.html(e)},error:function(){t.removeAttr("disabled")}})}),jQuery(document).on("click","button#iloveimg_allcompress",function(e){r=jQuery("button.iloveimg-watermark").length,jQuery("button#iloveimg_allcompress").attr("disabled","disabled"),jQuery("button.iloveimg-watermark").each(function(e,t){jQuery(t).trigger("click"),i=setInterval(function(){var e=100-100*jQuery("button.iloveimg-watermark").length/r;jQuery("button#iloveimg_allcompress .iloveimg-watermark-all__percent").width(e+"%"),jQuery("button.iloveimg-watermark").length||clearInterval(i)},300),location.reload()})}),jQuery("<option>").val("iloveimg_bulk_action").text("Watermark Images").appendTo("select[name=action]"),jQuery("<option>").val("iloveimg_bulk_action").text("Watermark Images").appendTo("select[name=action2]"),jQuery(".iloveimg_watermarking").each(function(r,o){a["ref_"+r]=setInterval(function(){var e,t,i;e=o,t=r,i=(e=jQuery(e)).closest("td"),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"ilove_img_wm_library_is_watermarked",id:e.data("id")||e.attr("data-id"),imgnonce:e.data("imgnonce")||e.attr("data-imgnonce")},success:function(e){clearInterval(a["ref_"+t]),i.html(e)},error:function(e){console.log(e)},statusCode:{500:function(){},400:function(){}}})},1e3)}),jQuery(document).on("submit","form#images-filter, form#posts-filter",function(e){"iloveimg_bulk_action"==jQuery(document).find("select#bulk-action-selector-top option:checked").val()&&(e.preventDefault(),jQuery("table.wp-list-table.images tbody tr, table.wp-list-table.media tbody tr").each(function(e,t){jQuery(t).find("th.check-column input[type='checkbox']").is(":checked")&&jQuery(t).find("td.status button, td.iloveimg_watermarkion button").trigger("click")}))})}jQuery(".iloveimg_settings__options-container form input").on("change",function(e){jQuery(".iloveimg_settings__options-container form .submit button").hasClass("need_saving")||setTimeout(function(){jQuery(".iloveimg_settings__options-container form .submit button").addClass("need_saving"),setTimeout(function(){jQuery(".iloveimg_settings__options-container form .submit button").removeClass("need_saving")},5e3)},1e3)}),jQuery("#picker").spectrum({showPaletteOnly:!0,togglePaletteOnly:!0,togglePaletteMoreText:"more",togglePaletteLessText:"less",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]],change:function(e){jQuery("#iloveimg_field_text_color").val(e),l()}});function t(){if(jQuery("#iloveimg_field_text").val()&&0<=jQuery("#iloveimg_field_scale").val()&&jQuery("#iloveimg_field_scale").val()<=100){var e=jQuery("#iloveimg_settings__watermark__preview").width()*(jQuery("#iloveimg_field_scale").val()/100);jQuery("#iloveimg_settings__watermark__preview p").css({fontSize:0});for(var t=0;jQuery("#iloveimg_settings__watermark__preview p").outerWidth()<e;t++)jQuery("#iloveimg_settings__watermark__preview p").css({fontSize:t});jQuery("#iloveimg_settings__watermark__preview p").css({fontSize:t-2,"line-height":t-2+"px"}),jQuery("#iloveimg_settings__watermark__preview img").width(e)}}function o(){var e="calc(50% - "+jQuery("#iloveimg_settings__watermark__preview p").outerWidth()/2+"px)",t="calc(50% - "+jQuery("#iloveimg_settings__watermark__preview p").outerHeight()/2+"px)";jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-texts p").eq(0).css({top:"0px",bottom:"auto",left:"0px",right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-texts p").eq(1).css({top:"0px",bottom:"auto",left:e,right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-texts p").eq(2).css({top:"0px",bottom:"auto",left:"auto",right:"0px"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-texts p").eq(3).css({top:t,bottom:"auto",left:"0px",right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-texts p").eq(4).css({top:t,bottom:"auto",left:e,right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-texts p").eq(5).css({top:t,bottom:"auto",left:"auto",right:"0px"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-texts p").eq(6).css({top:"auto",bottom:"0px",left:"0px",right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-texts p").eq(7).css({top:"auto",bottom:"0px",left:e,right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-texts p").eq(8).css({top:"auto",bottom:"0px",left:"auto",right:"0px"}),e="calc(50% - "+jQuery("#iloveimg_settings__watermark__preview img").outerWidth()/2+"px)",t="calc(50% - "+jQuery("#iloveimg_settings__watermark__preview img").outerHeight()/2+"px)",jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-images img").eq(0).css({top:"0px",bottom:"auto",left:"0px",right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-images img").eq(1).css({top:"0px",bottom:"auto",left:e,right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-images img").eq(2).css({top:"0px",bottom:"auto",left:"auto",right:"0px"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-images img").eq(3).css({top:t,bottom:"auto",left:"0px",right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-images img").eq(4).css({top:t,bottom:"auto",left:e,right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-images img").eq(5).css({top:t,bottom:"auto",left:"auto",right:"0px"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-images img").eq(6).css({top:"auto",bottom:"0px",left:"0px",right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-images img").eq(7).css({top:"auto",bottom:"0px",left:e,right:"auto"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-images img").eq(8).css({top:"auto",bottom:"0px",left:"auto",right:"0px"}),jQuery("#iloveimg_field_mosaic").is(":checked")?(jQuery("#iloveimg_settings__watermark__preview p, #iloveimg_settings__watermark__preview img").css({visibility:"visible"}),jQuery("table.iloveimg_watermark_position").addClass("mode_mosaic")):(jQuery("input:radio[name=iloveimg_field_position]").removeAttr("disabled"),jQuery("table.iloveimg_watermark_position").removeClass("mode_mosaic"),jQuery("#iloveimg_settings__watermark__preview p, #iloveimg_settings__watermark__preview img").css({visibility:"hidden"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-texts p").eq(parseInt(jQuery("input:radio[name=iloveimg_field_position]:checked").val())-1).css({visibility:"visible"}),jQuery("#iloveimg_settings__watermark__preview .iloveimg_settings__watermark__preview-images img").eq(parseInt(jQuery("input:radio[name=iloveimg_field_position]:checked").val())-1).css({visibility:"visible"}))}var _,l=function(){var e=jQuery("#iloveimg_field_text_family").val(),t=jQuery("#iloveimg_field_text_bold").is(":checked")?"bold":"normal",i=jQuery("#iloveimg_field_text_italic").is(":checked")?"italic":"normal",r=jQuery("#iloveimg_field_text_underline").is(":checked")?"underline":"none",o=jQuery("#iloveimg_field_text_color").val()?jQuery("#iloveimg_field_text_color").val():"#000";-1<["Courier New","Comic Sans MS","WenQuanYi Zen Hei","Lohit Marathi","Impact"].indexOf(e)?(jQuery(".iloveimg_font_none_style").show(),jQuery("#iloveimg_field_text_bold, #iloveimg_field_text_italic").attr("disabled","disabled")):(jQuery(".iloveimg_font_none_style").hide(),jQuery("#iloveimg_field_text_bold, #iloveimg_field_text_italic").removeAttr("disabled")),jQuery("#iloveimg_settings__watermark__preview p").text(jQuery("#iloveimg_field_text").val()),jQuery("#iloveimg_settings__watermark__preview p").css({opacity:jQuery("#iloveimg_field_opacity").val()/100,transform:"rotate("+jQuery("#iloveimg_field_rotation").val()+"deg)","font-weight":t,"font-style":i,"text-decoration":r,"font-family":e,color:o}),jQuery("#iloveimg_settings__watermark__preview img").css({opacity:jQuery("#iloveimg_field_opacity").val()/100,transform:"rotate("+jQuery("#iloveimg_field_rotation").val()+"deg)"})};document.getElementById("iloveimg_settings__watermark__preview")&&(jQuery(".iloveimg_settings__options__field__cols__2-"+jQuery("#iloveimg_field_type input:checked").val()).show(),("text"==jQuery("#iloveimg_field_type input:checked").val()?(jQuery("#iloveimg_settings__watermark__preview img").hide(),jQuery("#iloveimg_settings__watermark__preview p")):(jQuery("#iloveimg_settings__watermark__preview p").hide(),jQuery("#iloveimg_settings__watermark__preview img"))).show(),jQuery("#iloveimg_field_type input").on("change",function(e){jQuery(".iloveimg_settings__options__field__cols__2-text,.iloveimg_settings__options__field__cols__2-image").hide(),jQuery(".iloveimg_settings__options__field__cols__2-"+jQuery("#iloveimg_field_type input:checked").val()).show(),("text"==jQuery("#iloveimg_field_type input:checked").val()?(jQuery("#iloveimg_settings__watermark__preview img").hide(),jQuery("#iloveimg_settings__watermark__preview p")):(jQuery("#iloveimg_settings__watermark__preview p").hide(),jQuery("#iloveimg_settings__watermark__preview img"))).show()}),jQuery(".iloveimg_settings__options__field-preview input[type='text'], .iloveimg_settings__options__field-preview input[type='number']").on("keyup change",function(e){l(),t(),o()}),jQuery(".iloveimg_settings__options__field-preview select").on("change",function(e){l(),t(),o()}),jQuery(".iloveimg_settings__options__field-preview input[type='radio']").on("change",function(e){l(),t(),o()}),jQuery(".iloveimg_settings__options__field-preview input[type='checkbox']").on("change",function(e){jQuery("#iloveimg_field_mosaic").is(":checked")&&33<jQuery("#iloveimg_field_scale").val()&&jQuery("#iloveimg_field_scale").val(33),l(),t(),o()}),l(),t(),o()),jQuery(".iloveimg_page_iloveimg-watermark-admin-page #iloveimg_restore_all").on("click",function(e){let t=jQuery(e.currentTarget);e.preventDefault(),Swal.fire({title:"Attention!",text:"The changes applied by all the tools will be lost. Do you want to continue?",icon:"warning",confirmButtonText:"Yes",showCloseButton:!0,buttonsStyling:!1,customClass:{confirmButton:"button-primary"}}).then(e=>{e.isConfirmed&&(t.attr("disabled","disabled"),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"ilove_img_wm_restore_all"},success:function(){t.removeAttr("disabled"),location.reload()},error:function(){t.removeAttr("disabled")}}))})}),jQuery(".iloveimg_page_iloveimg-watermark-admin-page #iloveimg_clear_backup").on("click",function(e){e.preventDefault();let t=jQuery(e.currentTarget);Swal.fire({title:"Attention!",text:"All files inside iloveimg-backup folder will be deleted. Do you want to continue?",icon:"warning",confirmButtonText:"Yes",showCloseButton:!0,buttonsStyling:!1,customClass:{confirmButton:"button-primary"}}).then(e=>{e.isConfirmed&&(t.attr("disabled","disabled"),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"ilove_img_wm_clear_backup"},success:function(){t.removeAttr("disabled"),location.reload()},error:function(){t.removeAttr("disabled")}}))})}),jQuery(".iloveimg-watermark.iloveimg_restore_button_wrapper .iloveimg_restore_button").on("click",function(e){e.preventDefault();let t=jQuery(e.currentTarget),i=jQuery(e.currentTarget).siblings("#_wpnonce"),r=(i=i.val(),t.data("action")),o=t.data("id");t.hide(),t.nextAll(".loading").show(),Swal.fire({title:"Attention!",text:"The changes applied by all the tools will be lost. Do you want to continue?",icon:"warning",confirmButtonText:"Yes",showCloseButton:!0,buttonsStyling:!1,customClass:{confirmButton:"button-primary"}}).then(e=>{e.isConfirmed?jQuery.ajax({url:ajaxurl,type:"POST",data:{action:r,id:o,_wpnonce:i},dataType:"json",success:function(e){t.nextAll(".loading").hide(),t.nextAll(".success").html(e.data).show(),location.reload()},error:function(e){t.nextAll(".loading").hide(),t.nextAll(".error").html(e.responseJSON.data).show(),t.show()}}):(t.show(),t.nextAll(".loading").hide())})}),jQuery("input[name='iloveimg_field_image']").on("keyup change",function(e){jQuery("#iloveimg_settings__watermark__preview img").attr("src",jQuery("input[name='iloveimg_field_image']").val())}),jQuery("#media-open").on("click",function(e){e.preventDefault(),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"ilove_img_wm_library_set_watermark_image"},success:function(e){}}),_||(_=wp.media({title:"Select or Upload Media",button:{text:"Select Watermark"},multiple:!1})).on("select",function(){var e=_.state().get("selection").first().toJSON();jQuery("input[name='iloveimg_field_image']").val(e.url),jQuery("#iloveimg_settings__watermark__preview img").attr("src",e.url),l(),t(),o()}),_.open()})}.call();